<ion-header>
  <ion-toolbar>
    <ion-title style="font-size: medium; font-weight: bold;">
      <span *ngIf="user_first_name !== null">{{user_first_name}}</span>
    </ion-title>
    <ion-buttons slot="end">
      <span style="font-style: italic; color: #a2a4ab; font-size: small;">V {{app_version}}</span>
      <ion-button (click)="onLogout()" *ngIf="user_type != 'guest'">
        <ion-icon slot="icon-only" name="log-out"></ion-icon>
      </ion-button>
      <ion-button (click)="onLoginClicked()" *ngIf="user_type == 'guest'">
        login
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="product_form">
    <ion-searchbar animated="true" mode="ios" placeholder="Search Product" formControlName="product_value" #filter_term>
    </ion-searchbar>
    <span *ngIf="product_form.valid">
      <ion-item *ngFor="let product of products | productFilter: filter_term.value;" (click)="productSelected(product)">
        {{ product['name'] }}
      </ion-item>
    </span>
  </form>
  <!-- <marquee direction="left">
    <ion-row>
      <ion-col size="3" *ngFor="let request of requests">
        <ion-card>
          <img [src]="product_images[request.product_id]"><br>
          <ion-label>{{request['product_name']}}</ion-label><br>
          <ion-label>{{request['district']}}</ion-label>
        </ion-card>
      </ion-col>
    </ion-row>
  </marquee> -->
  <div style="font-size: 17px;margin-top:-2%; text-align:center">Recent Demands</div>
  <ion-slides [options]="slideOpts" #request_slide loop="true">
    <ion-slide *ngFor="let request of requests">
      <!-- <ion-card> -->
      <ion-row style="width: 100%;">
        <ion-col style="font-size: 13px;">
          <img [src]="product_images[request.product_id]" style="width: 100px; height:100px;"
            (click)="requestDetailsClicked(request)"><br>
          <ion-label>{{request['product_name']| slice :0:4 }} - {{request['quantity']}} {{request['unit_name']}}
          </ion-label><br>
          <ion-label>{{request['district']}}</ion-label>
        </ion-col>
      </ion-row>
      <!-- </ion-card> -->
    </ion-slide>
  </ion-slides>
  <div style="text-align: center;background: #bee0f3;" (click)="routePage('request/list')">
    <ion-label>Know more</ion-label>
  </div>
  <ion-grid class="dashboard-grid">
    <ion-row style="text-align: center;">
      <ion-col size="4" class="dashboard-tile icon-one" (click)="routePage('sell/product/category')">
        <span>
          <img src="assets/dashboard-icon/sell.svg" class="dashboard-tile-icon">
        </span><br>
        <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Sell</ion-label>
      </ion-col>
      <ion-col size="4" class="dashboard-tile icon-one" (click)="routePage('buy/product/category')">
        <span>
          <img src="assets/dashboard-icon/buy.svg" class="dashboard-tile-icon">
        </span><br>
        <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Buy</ion-label>
      </ion-col>
      <ion-col size="4" class="dashboard-tile icon-one" (click)="routePage('request/list')">
        <span>
          <img src="assets/dashboard-icon/user.svg" class="dashboard-tile-icon">
        </span><br>
        <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Request</ion-label>
      </ion-col>
      <ion-col size="4" class="dashboard-tile icon-one" (click)="routePage('manage/post')">
        <span>
          <img src="assets/dashboard-icon/user.svg" class="dashboard-tile-icon">
        </span><br>
        <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Manage</ion-label>
      </ion-col>
      <ion-col size="4" class="dashboard-tile icon-one" (click)="routePage('profile')">
        <span>
          <img src="assets/dashboard-icon/user.svg" class="dashboard-tile-icon">
        </span><br>
        <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Profile</ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div style="font-size: 17px;text-align:center">Recent Post</div>
  <ion-slides [options]="recentPostOpts" #recent_post_slides loop="true">
    <ion-slide *ngFor="let post of recent_posts">
      <ion-card style="width: 100%;">
        <ion-row style="width: 100%;">
          <ion-col (click)="makeEnquiryClicked(post)">
            <span *ngIf="post['image'] == null">
              <img [src]="product_images[post.product_id]" style="width: 100px; height:100px"><br>
            </span>
            <span *ngIf="post['image'] != null">
              <img src="{{post['image']}}" style="width: 100px; height:100px"><br>
            </span>
            <ion-label>{{post['product_name']}} - {{post['quantity']}} {{post['unit_name']}}
            </ion-label><br>
            <ion-label>{{post['district']}}</ion-label>
          </ion-col>
        </ion-row>
      </ion-card>
    </ion-slide>
  </ion-slides>
  <div style="text-align: center;background: #bee0f3;" (click)="routePage('buy/product/category')">
    <ion-label>Know more</ion-label>
  </div>
</ion-content>