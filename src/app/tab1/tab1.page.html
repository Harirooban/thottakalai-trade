<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button>
      </ion-menu-button>
    </ion-buttons>
    <ion-title style="font-size: medium; font-weight: bold;">
      <span *ngIf="user_first_name !== null">{{user_first_name}}</span>
    </ion-title>
    <ion-buttons slot="end">
      <span style="font-style: italic; color: #a2a4ab; font-size: small;">V {{app_version}}</span>
      <ion-button (click)="onLogout()" *ngIf="user_type != 'guest'">
        <ion-icon slot="icon-only" name="log-out"></ion-icon>
      </ion-button>
      <ion-button (click)="onLoginClicked()" *ngIf="user_type == 'guest'">
        login
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div style="text-align: center;background: #dfebe7; margin-top: 6%;">
    <div style="font-size: 19px;margin-top:-2%; text-align:center;margin-bottom:10px;">Recent demands/queries</div>
    <ion-slides [options]="slideOpts" #request_slide>
      <ion-slide *ngFor="let request of requests">
        <!-- <ion-card> -->
        <ion-row style="width: 100%;">
          <ion-col class="slide-class">
            <img [src]="product_images[request.product_id]" style="width: 50px; height:50px;"
              (click)="requestDetailsClicked(request)"><br>
            <ion-label>{{request['product_name']| slice :0:4 }} - {{request['quantity']}} {{request['unit_name']}}
            </ion-label><br>
            <ion-label>{{request['district']}}</ion-label>
          </ion-col>
        </ion-row>
        <!-- </ion-card> -->
      </ion-slide>
    </ion-slides>
    <div style="text-align: center;background: #5b8275; color: white" (click)="routePage('request/list')">
      <ion-label style="font-size: 23px;">Know more</ion-label>
    </div>
  </div>
  <form [formGroup]="product_form">
    <ion-searchbar animated="true" mode="ios" placeholder="Search Product" formControlName="product_value" #filter_term>
    </ion-searchbar>
    <span *ngIf="product_form.valid">
      <ion-item *ngFor="let product of products | productFilter: filter_term.value;" (click)="productSelected(product)">
        {{ product['name'] }}
      </ion-item>
    </span>
  </form>
  <ion-grid class="dashboard-grid">
    <ion-row style="text-align: center;">
      <ion-col size="4" (click)="routePage('sell/product/category')">
        <div class="card-background">
          <img src="assets/dashboard-icon/sell.svg" class="dashboard-tile-icon"><br>
          <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Sell</ion-label>
        </div>
      </ion-col>
      <ion-col size="4" (click)="routePage('buy/product/category')">
        <div class="card-background">
          <img src="assets/dashboard-icon/buy.svg" class="dashboard-tile-icon">
          <br>
          <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Buy</ion-label>
        </div>
      </ion-col>
      <ion-col size="4" (click)="routePage('request/list')">
        <div class="card-background">
          <img src="assets/dashboard-icon/user.svg" class="dashboard-tile-icon">
          <br>
          <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Needs?</ion-label>
        </div>
      </ion-col>
      <ion-col size="4" (click)="routePage('manage/post')">
        <div class="card-background">
          <img src="assets/dashboard-icon/user.svg" class="dashboard-tile-icon">
          <br>
          <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Manage</ion-label>
        </div>
      </ion-col>
      <ion-col size="4" (click)="routePage('profile')">
        <div class="card-background">
          <img src="assets/dashboard-icon/user.svg" class="dashboard-tile-icon">
          <br>
          <ion-label class="dashboard-title-text" style="word-wrap: break-word;">Profile</ion-label>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div style="background:#f9e48d">
    <div style="font-size: 19px;text-align:center;margin-top:10px">Available product</div>
    <ion-slides [options]="recentPostOpts" #recent_post_slides>
      <ion-slide *ngFor="let post of recent_posts">
        <ion-card class="slide2-card">
          <ion-row style="width: 100%;">
            <ion-col (click)="makeEnquiryClicked(post)" style="color: black; font-size:19px;">
              <div class="slide2-image">
                <span *ngIf="post['image'] == null">
                  <img [src]="product_images[post.product_id]" style="width: 60px; height:60px"><br>
                </span>
                <span *ngIf="post['image'] != null">
                  <img src="{{post['image']}}" style="width: 60px; height:60px"><br>
                </span>
              </div>
              <ion-label>{{post['product_name'] | slice :0:6}} - {{post['quantity']}} {{post['unit_name']}}
              </ion-label><br>
              <ion-label>{{post['district']}}</ion-label>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-slide>
    </ion-slides>
    <div style="text-align: center;background: #f3c70c;font-size: 23px;" (click)="routePage('buy/product/category')">
      <ion-label>Know more</ion-label>
    </div>
  </div>
</ion-content>